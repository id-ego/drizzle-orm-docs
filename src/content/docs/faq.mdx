import Callout from '@mdx/Callout.astro';

# FAQ & 트러블슈팅

## **`generate`와 `push` 중 어떤 것을 사용해야 하나요?**

이 두 명령어는 논리적으로 다른 목적을 가지고 있습니다. `generate`는 `drizzle-kit` (또는 다른 마이그레이션 도구)에 필요한 추가 정보와 함께 SQL 파일을 생성하는 데 사용됩니다.

마이그레이션을 생성한 후에는 데이터베이스에 자동으로 적용되지 않습니다.
다음 단계에서 직접 적용해야 합니다. 자세한 내용은 **[여기](/docs/migrations)**에서 확인할 수 있습니다.

반면, `push`는 마이그레이션을 생성할 필요가 없습니다.
단순히 스키마를 데이터베이스 스키마와 동기화합니다. 사용 시 주의가 필요하며,
로컬 개발 환경과 로컬 데이터베이스에서만 사용할 것을 권장합니다. 자세한 내용은 **[`drizzle-kit push`](/docs/drizzle-kit-push)**를 참고하세요.

## PostgreSQL 인덱스에서 `push`와 `generate`가 작동하는 방식

### 제한사항

1. **하나 이상의 표현식을 포함하는 인덱스가 있는 경우 인덱스 이름을 수동으로 지정해야 합니다**

예제

```ts
index().on(table.id, table.email) // 정상 작동하며 이름이 자동 생성됩니다
index('my_name').on(table.id, table.email) // 정상 작동합니다

// 하지만

index().on(sql`lower(${table.email})`) // 오류 발생
index('my_name').on(sql`lower(${table.email})`) // 정상 작동합니다
```

2. **기존 인덱스에서 다음 필드가 변경된 경우 Push는 구문을 생성하지 않습니다:**

- `.on()` 및 `.using()` 내부의 표현식
- `.where()` 구문
- 컬럼의 연산자 클래스 `.op()`

`push` 워크플로우를 사용하면서 인덱스의 이러한 필드를 변경하려면 다음 단계를 수행해야 합니다:

1. 인덱스를 주석 처리
2. Push 실행
3. 인덱스 주석을 해제하고 해당 필드 변경
4. 다시 Push 실행

`generate` 명령어의 경우, 새로운 Drizzle 인덱스 API의 모든 속성에 대한 인덱스 변경사항이 `drizzle-kit`을 트리거하므로 여기에는 제한사항이 없습니다.