---
title: "Neon Postgresë¡œ Todo ì•± ë§Œë“¤ê¸°"
date: "2024-01-17"
svgs: ['<svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 43.4805 67.3037)" fill="currentColor"></rect><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 76.9395 46.5342)" fill="currentColor"></rect><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 128.424 46.5352)" fill="currentColor"></rect><rect width="9.63139" height="40.8516" rx="4.8157" transform="matrix(0.873028 0.48767 -0.497212 0.867629 94.957 67.3037)" fill="currentColor"></rect></svg>', '<svg width="256" height="256" viewBox="0 0 256 256" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_84_2)"><path d="M128 256C198.692 256 256 198.692 256 128C256 57.3075 198.692 0 128 0C57.3075 0 0 57.3075 0 128C0 198.692 57.3075 256 128 256Z" fill="black"/><path d="M212.63 224.03L98.34 76.8H76.8V179.16H94.03V98.68L199.11 234.45C203.85 231.27 208.37 227.79 212.63 224.03Z" fill="url(#paint0_linear_84_2)"/><path d="M180.63 76.8H163.56V179.2H180.63V76.8Z" fill="url(#paint1_linear_84_2)"/></g><defs><linearGradient id="paint0_linear_84_2" x1="132.707" y1="181.561" x2="178.076" y2="237.79" gradientUnits="userSpaceOnUse"><stop stop-color="white"/><stop offset="1" stop-color="white" stop-opacity="0"/></linearGradient><linearGradient id="paint1_linear_84_2" x1="172.083" y1="76.7712" x2="171.776" y2="151.973" gradientUnits="userSpaceOnUse"><stop stop-color="white"/><stop offset="1" stop-color="white" stop-opacity="0"/></linearGradient><clipPath id="clip0_84_2"><rect width="256" height="256" fill="white"/></clipPath></defs></svg>', '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 6.27586C2 4.46665 3.54385 3 5.44828 3H18.5517C20.4562 3 22 4.46665 22 6.27586V16.8631C22 18.7349 19.5068 19.5471 18.2976 18.0694L14.5173 13.4496V19.0517C14.5173 20.68 13.1278 22 11.4138 22H5.44828C3.54385 22 2 20.5333 2 18.7241V6.27586ZM5.44828 5.62069C5.06739 5.62069 4.75863 5.91402 4.75863 6.27586V18.7241C4.75863 19.086 5.06739 19.3793 5.44828 19.3793H11.5172C11.7077 19.3793 11.7586 19.2327 11.7586 19.0517V11.5393C11.7586 9.66758 14.2518 8.8552 15.461 10.333L19.2414 14.9528V6.27586C19.2414 5.91402 19.2774 5.62069 18.8966 5.62069H5.44828Z" fill="currentColor"/></svg>']
---

import Steps from "@mdx/Steps.astro";
import Npm from "@mdx/Npm.astro";
import CodeTabs from "@mdx/CodeTabs.astro";
import CodeTab from "@mdx/CodeTab.astro";
import Section from "@mdx/Section.astro";
import Tabs from "@mdx/Tabs.astro";
import Tab from "@mdx/Tab.astro";
import Prerequisites from "@mdx/Prerequisites.astro";
import Callout from "@mdx/Callout.astro";

ì´ íŠœí† ë¦¬ì–¼ì€ **Drizzle ORM**, **Neon ë°ì´í„°ë² ì´ìŠ¤**, **Next.js**ë¥¼ ì‚¬ìš©í•˜ì—¬ `Todo ì•±`ì„ ë§Œë“œëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

<Prerequisites>
  - ê¸°ì¡´ Next.js í”„ë¡œì íŠ¸ê°€ ìˆê±°ë‚˜ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤:
  ```bash
  npx create-next-app@latest --typescript
  ```

  - Drizzle ORMê³¼ [Drizzle kit](/docs/kit-overview)ì„ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
  <Npm>
    drizzle-orm
    -D drizzle-kit
  </Npm>

  - [Neon serverless driver](https://neon.tech/docs/serverless/serverless-driver)ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
  <Npm>
    @neondatabase/serverless
  </Npm>

  - í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ë¥¼ ìœ„í•´ `dotenv` íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
  <Npm>
    dotenv
  </Npm>
</Prerequisites>

<Callout type="warning">
ì„¤ì¹˜ ì¤‘ ì˜ì¡´ì„± í•´ê²° ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ê²½ìš°:

React Nativeë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ `--force` ë˜ëŠ” `--legacy-peer-deps` ì˜µì…˜ìœ¼ë¡œ ê°•ì œ ì„¤ì¹˜í•˜ë©´ ë¬¸ì œê°€ í•´ê²°ë©ë‹ˆë‹¤. React Nativeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” React Native ë²„ì „ê³¼ í˜¸í™˜ë˜ëŠ” ì •í™•í•œ React ë²„ì „ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
</Callout>

## Neonê³¼ Drizzle ORM ì„¤ì •

<Steps>
#### ìƒˆ Neon í”„ë¡œì íŠ¸ ìƒì„±

[Neon Console](https://console.neon.tech/app/projects)ì— ë¡œê·¸ì¸í•˜ê³  Projects ì„¹ì…˜ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ê±°ë‚˜ `New Project` ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

Neon í”„ë¡œì íŠ¸ì—ëŠ” `neondb`ë¼ëŠ” ì´ë¦„ì˜ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ Postgres ë°ì´í„°ë² ì´ìŠ¤ê°€ ì œê³µë©ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ì´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

#### ì—°ê²° ë¬¸ìì—´ ë³€ìˆ˜ ì„¤ì •

í”„ë¡œì íŠ¸ ì½˜ì†”ì˜ **Connection Details** ì„¹ì…˜ìœ¼ë¡œ ì´ë™í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ìì—´ì„ í™•ì¸í•©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ìœ ì‚¬í•œ í˜•íƒœì…ë‹ˆë‹¤:

```bash
postgres://username:password@ep-cool-darkness-123456.us-east-2.aws.neon.tech/neondb
```

`.env` ë˜ëŠ” `.env.local` íŒŒì¼ì— `DATABASE_URL` í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ ë³€ìˆ˜ëŠ” Neon ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

```bash
DATABASE_URL=NEON_DATABASE_CONNECTION_STRING
```

#### Drizzle ORMì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°

`src/db` í´ë”ì— `drizzle.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤:

```tsx copy filename="src/db/drizzle.ts"
import { config } from "dotenv";
import { drizzle } from 'drizzle-orm/neon-http';

config({ path: ".env" }); // or .env.local

export const db = drizzle(process.env.DATABASE_URL!);
```

#### todo ìŠ¤í‚¤ë§ˆ ì„ ì–¸

```tsx copy filename="src/db/schema.ts"
import { integer, text, boolean, pgTable } from "drizzle-orm/pg-core";

export const todo = pgTable("todo", {
  id: integer("id").primaryKey(),
  text: text("text").notNull(),
  done: boolean("done").default(false).notNull(),
});
```

ì—¬ê¸°ì„œëŠ” Drizzle ORMì˜ ë°ì´í„° íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ **`id`**, **`text`**, **`done`** í•„ë“œë¥¼ ê°€ì§„ **`todo`** í…Œì´ë¸”ì„ ì •ì˜í•©ë‹ˆë‹¤.

#### Drizzle ì„¤ì • íŒŒì¼ ì„¤ì •

**Drizzle config** - [Drizzle Kit](/docs/kit-overview)ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì„¤ì • íŒŒì¼ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°, ë§ˆì´ê·¸ë ˆì´ì…˜ í´ë”, ìŠ¤í‚¤ë§ˆ íŒŒì¼ì— ëŒ€í•œ ëª¨ë“  ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `drizzle.config.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

```typescript copy filename="drizzle.config.ts"
import { config } from 'dotenv';
import { defineConfig } from "drizzle-kit";

config({ path: '.env' });

export default defineConfig({
  schema: "./src/db/schema.ts",
  out: "./migrations",
  dialect: "postgresql",
  dbCredentials: {
    url: process.env.DATABASE_URL!,
  },
});
```

#### ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ì‚¬í•­ ì ìš©

`drizzle-kit generate` ëª…ë ¹ì–´ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•˜ê³  `drizzle-kit migrate` ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±:

```bash
npx drizzle-kit generate
```

ì´ ë§ˆì´ê·¸ë ˆì´ì…˜ë“¤ì€ `drizzle.config.ts`ì— ì§€ì •ëœ ëŒ€ë¡œ `drizzle/migrations` ë””ë ‰í† ë¦¬ì— ì €ì¥ë©ë‹ˆë‹¤. ì´ ë””ë ‰í† ë¦¬ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° í•„ìš”í•œ SQL íŒŒì¼ê³¼ ë‹¤ì–‘í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„ì˜ ìŠ¤í‚¤ë§ˆ ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•˜ëŠ” `meta` í´ë”ê°€ í¬í•¨ë©ë‹ˆë‹¤.

ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜ˆì‹œ:

```sql
CREATE TABLE IF NOT EXISTS "todo" (
	"id" integer PRIMARY KEY NOT NULL,
	"text" text NOT NULL,
	"done" boolean DEFAULT false NOT NULL
);
```

ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰:

```bash
npx drizzle-kit migrate
```

ë˜ëŠ” [Drizzle kit push ëª…ë ¹ì–´](/docs/kit-overview#prototyping-with-db-push)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ì‚¬í•­ì„ ì§ì ‘ í‘¸ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
npx drizzle-kit push
```

<Callout type="warning">Push ëª…ë ¹ì–´ëŠ” ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ ìƒˆë¡œìš´ ìŠ¤í‚¤ë§ˆ ë””ìì¸ì´ë‚˜ ë³€ê²½ì‚¬í•­ì„ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸í•´ì•¼ í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ê´€ë¦¬ ë¶€ë‹´ ì—†ì´ ë¹ ë¥¸ ë°˜ë³µ ì‘ì—…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</Callout>
</Steps>

#### ì„œë²„ ì‚¬ì´ë“œ í•¨ìˆ˜ êµ¬ì¶•

ì´ ë‹¨ê³„ì—ì„œëŠ” **src/actions/todoAction.ts** íŒŒì¼ì— todo ì•„ì´í…œì— ëŒ€í•œ ì£¼ìš” ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë²„ ì‚¬ì´ë“œ í•¨ìˆ˜ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤:

1. **`getData`:**
    - ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ëª¨ë“  ê¸°ì¡´ todo ì•„ì´í…œì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
2. **`addTodo`:**
    - ì œê³µëœ í…ìŠ¤íŠ¸ë¡œ ìƒˆ todo ì•„ì´í…œì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì¶”ê°€í•©ë‹ˆë‹¤.
    - **`revalidatePath("/")`**ë¥¼ ì‚¬ìš©í•˜ì—¬ í™ˆ í˜ì´ì§€ì˜ ì¬ê²€ì¦ì„ ì‹œì‘í•©ë‹ˆë‹¤.
3. **`deleteTodo`:**
    - ê³ ìœ  IDë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ todo ì•„ì´í…œì„ ì œê±°í•©ë‹ˆë‹¤.
    - í™ˆ í˜ì´ì§€ì˜ ì¬ê²€ì¦ì„ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤.
4. **`toggleTodo`:**
    - todo ì•„ì´í…œì˜ ì™„ë£Œ ìƒíƒœë¥¼ í† ê¸€í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê·¸ì— ë”°ë¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
    - ì‘ì—… í›„ í™ˆ í˜ì´ì§€ë¥¼ ì¬ê²€ì¦í•©ë‹ˆë‹¤.
5. **`editTodo`:**
    - IDë¡œ ì‹ë³„ëœ todo ì•„ì´í…œì˜ í…ìŠ¤íŠ¸ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìˆ˜ì •í•©ë‹ˆë‹¤.
    - í™ˆ í˜ì´ì§€ì˜ ì¬ê²€ì¦ì„ ì‹œì‘í•©ë‹ˆë‹¤.

```tsx collapsable copy filename="src/actions/todoAction.ts"
"use server";
import { eq, not } from "drizzle-orm";
import { revalidatePath } from "next/cache";
import { db } from "@/db/drizzle";
import { todo } from "@/db/schema";

export const getData = async () => {
  const data = await db.select().from(todo);
  return data;
};

export const addTodo = async (id: number, text: string) => {
  await db.insert(todo).values({
    id: id,
    text: text,
  });
};

export const deleteTodo = async (id: number) => {
  await db.delete(todo).where(eq(todo.id, id));

  revalidatePath("/");
};

export const toggleTodo = async (id: number) => {
  await db
    .update(todo)
    .set({
      done: not(todo.done),
    })
    .where(eq(todo.id, id));

  revalidatePath("/");
};

export const editTodo = async (id: number, text: string) => {
  await db
    .update(todo)
    .set({
      text: text,
    })
    .where(eq(todo.id, id));

  revalidatePath("/");
};
```

## Next.jsë¡œ í™ˆ í˜ì´ì§€ ì„¤ì •

<Steps>
#### TypeScript íƒ€ì… ì •ì˜

`src/types/todoType.ts`ì—ì„œ todo ì•„ì´í…œì„ ìœ„í•œ TypeScript íƒ€ì…ì„ ì •ì˜í•©ë‹ˆë‹¤. ì´ íƒ€ì…ì€ **`number`** íƒ€ì…ì˜ **`id`**, **`string`** íƒ€ì…ì˜ **`text`**, **`boolean`** íƒ€ì…ì˜ **`done`** ì„¸ ê°€ì§€ ì†ì„±ì„ ê°€ì§‘ë‹ˆë‹¤. **`todoType`**ì´ë¼ëŠ” ì´ë¦„ì˜ ì´ íƒ€ì…ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ ì¼ë°˜ì ì¸ todo ì•„ì´í…œì˜ êµ¬ì¡°ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

```ts copy filename="src/types/todoType.ts"
export type todoType = {
  id: number;
  text: string;
  done: boolean;
};
```

#### To-do ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ í™ˆ í˜ì´ì§€ ìƒì„±

1. **`src/components/todo.tsx`:**
    ë‹¨ì¼ todo ì•„ì´í…œì„ ë‚˜íƒ€ë‚´ëŠ” `Todo` ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. todo í…ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•˜ê³  í¸ì§‘í•˜ëŠ” ê¸°ëŠ¥, ì²´í¬ë°•ìŠ¤ë¡œ ì™„ë£Œ í‘œì‹œí•˜ëŠ” ê¸°ëŠ¥, í¸ì§‘, ì €ì¥, ì·¨ì†Œ, ì‚­ì œ ì‘ì—…ì„ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ í¬í•¨í•©ë‹ˆë‹¤.
2. **`src/components/addTodo.tsx`:**
    `AddTodo` ì»´í¬ë„ŒíŠ¸ëŠ” Todo ì•±ì— ìƒˆ todo ì•„ì´í…œì„ ì¶”ê°€í•˜ëŠ” ê°„ë‹¨í•œ í¼ì„ ì œê³µí•©ë‹ˆë‹¤. todo í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ëŠ” ì…ë ¥ í•„ë“œì™€ ìƒˆ todo ì¶”ê°€ë¥¼ íŠ¸ë¦¬ê±°í•˜ëŠ” ë²„íŠ¼ì´ í¬í•¨ë©ë‹ˆë‹¤.
3. **`src/components/todos.tsx`:**
    Todo ì•±ì˜ ë©”ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Todos ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. todo ì•„ì´í…œì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , todoë¥¼ ìƒì„±, í¸ì§‘, í† ê¸€, ì‚­ì œí•˜ëŠ” í•¨ìˆ˜ë¥¼ ì œê³µí•˜ë©°, `Todo` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°œë³„ todo ì•„ì´í…œì„ ë Œë”ë§í•©ë‹ˆë‹¤.

<CodeTabs items={["todo.tsx", "addTodo.tsx", "todos.tsx"]}>
```tsx collapsable copy
"use client";
import { ChangeEvent, FC, useState } from "react";
import { todoType } from "@/types/todoType";

interface Props {
  todo: todoType;
  changeTodoText: (id: number, text: string) => void;
  toggleIsTodoDone: (id: number, done: boolean) => void;
  deleteTodoItem: (id: number) => void;
}

const Todo: FC<Props> = ({
  todo,
  changeTodoText,
  toggleIsTodoDone,
  deleteTodoItem,
}) => {
  // State for handling editing mode
  const [editing, setEditing] = useState(false);

  // State for handling text input
  const [text, setText] = useState(todo.text);

  // State for handling "done" status
  const [isDone, setIsDone] = useState(todo.done);

  // Event handler for text input change
  const handleTextChange = (e: ChangeEvent<HTMLInputElement>) => {
    setText(e.target.value);
  };

  // Event handler for toggling "done" status
  const handleIsDone = async () => {
    toggleIsTodoDone(todo.id, !isDone);
    setIsDone((prev) => !prev);
  };

  // Event handler for initiating the edit mode
  const handleEdit = () => {
    setEditing(true);
  };

  // Event handler for saving the edited text
  const handleSave = async () => {
    changeTodoText(todo.id, text);
    setEditing(false);
  };

  // Event handler for canceling the edit mode
  const handleCancel = () => {
    setEditing(false);
    setText(todo.text);
  };

  // Event handler for deleting a todo item
  const handleDelete = () => {
    if (confirm("Are you sure you want to delete this todo?")) {
      deleteTodoItem(todo.id);
    }
  };

  // Rendering the Todo component
  return (
    <div className="flex items-center gap-2 p-4 border-gray-200 border-solid border rounded-lg">
      {/* Checkbox for marking the todo as done */}
      <input
        type="checkbox"
        className="text-blue-200 rounded-sm h-4 w-4"
        checked={isDone}
        onChange={handleIsDone}
      />
      {/* Input field for todo text */}
      <input
        type="text"
        value={text}
        onChange={handleTextChange}
        readOnly={!editing}
        className={`${
          todo.done ? "line-through" : ""
        } outline-none read-only:border-transparent focus:border border-gray-200 rounded px-2 py-1 w-full`}
      />
      {/* Action buttons for editing, saving, canceling, and deleting */}
      <div className="flex gap-1 ml-auto">
        {editing ? (
          <button
            onClick={handleSave}
            className="bg-green-600 text-green-50 rounded px-2 w-14 py-1"
          >
            Save
          </button>
        ) : (
          <button
            onClick={handleEdit}
            className="bg-blue-400 text-blue-50 rounded w-14 px-2 py-1"
          >
            Edit
          </button>
        )}
        {editing ? (
          <button
            onClick={handleCancel}
            className="bg-red-400 w-16 text-red-50 rounded px-2 py-1"
          >
            Close
          </button>
        ) : (
          <button
            onClick={handleDelete}
            className="bg-red-400 w-16 text-red-50 rounded px-2 py-1"
          >
            Delete
          </button>
        )}
      </div>
    </div>
  );
};

export default Todo;
```
```tsx collapsable copy
"use client";
import { ChangeEvent, FC, useState } from "react";

interface Props {
  createTodo: (value: string) => void;
}

const AddTodo: FC<Props> = ({ createTodo }) => {
  // State for handling input value
  const [input, setInput] = useState("");

  // Event handler for input change
  const handleInput = (e: ChangeEvent<HTMLInputElement>) => {
    setInput(e.target.value);
  };

  // Event handler for adding a new todo
  const handleAdd = async () => {
    createTodo(input);
    setInput("");
  };

  // Rendering the AddTodo component
  return (
    <div className="w-full flex gap-1 mt-2">
      {/* Input field for entering new todo text */}
      <input
        type="text"
        className="w-full px-2 py-1 border border-gray-200 rounded outline-none"
        onChange={handleInput}
        value={input}
      />
      {/* Button for adding a new todo */}
      <button
        className="flex items-center justify-center bg-green-600 text-green-50 rounded px-2 h-9 w-14 py-1"
        onClick={handleAdd}
      >
        Add
      </button>
    </div>
  );
};

export default AddTodo;
```

	<CodeTab>
```tsx collapsable copy
"use client";
import { FC, useState } from "react";
import { todoType } from "@/types/todoType";
import Todo from "./todo";
import AddTodo from "./addTodo";
import { addTodo, deleteTodo, editTodo, toggleTodo } from "@/actions/todoAction";

interface Props {
  todos: todoType[];
}

const Todos: FC<Props> = ({ todos }) => {
  // State to manage the list of todo items
  const [todoItems, setTodoItems] = useState<todoType[]>(todos);

  // Function to create a new todo item
  const createTodo = (text: string) => {
    const id = (todoItems.at(-1)?.id || 0) + 1;
    addTodo(id, text);
    setTodoItems((prev) => [...prev, { id: id, text, done: false }]);
  };

  // Function to change the text of a todo item
  const changeTodoText = (id: number, text: string) => {
    setTodoItems((prev) =>
      prev.map((todo) => (todo.id === id ? { ...todo, text } : todo))
    );
    editTodo(id, text);
  };

  // Function to toggle the "done" status of a todo item
  const toggleIsTodoDone = (id: number) => {
    setTodoItems((prev) =>
      prev.map((todo) => (todo.id === id ? { ...todo, done: !todo.done } : todo))
    );
    toggleTodo(id);
  };

  // Function to delete a todo item
  const deleteTodoItem = (id: number) => {
    setTodoItems((prev) => prev.filter((todo) => todo.id !== id));
    deleteTodo(id);
  };

  // Rendering the Todo List component
  return (
    <main className="flex mx-auto max-w-xl w-full min-h-screen flex-col items-center p-16">
      <div className="text-5xl font-medium">To-do app</div>
      <div className="w-full flex flex-col mt-8 gap-2">
        {/* Mapping through todoItems and rendering Todo component for each */}
        {todoItems.map((todo) => (
          <Todo
            key={todo.id}
            todo={todo}
            changeTodoText={changeTodoText}
            toggleIsTodoDone={toggleIsTodoDone}
            deleteTodoItem={deleteTodoItem}
          />
        ))}
      </div>
      {/* Adding Todo component for creating new todos */}
      <AddTodo createTodo={createTodo} />
    </main>
  );
};

export default Todos;
```

    </CodeTab>
</CodeTabs>

`src/app` í´ë”ì˜ `page.tsx` íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ todo ì•„ì´í…œì„ ê°€ì ¸ì˜¤ê³  `Todos` ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤:

```tsx copy filename="src/app/page.tsx"
import { getData } from "@/actions/todoAction";
import Todos from "@/components/todos";

export default async function Home() {
  const data = await getData();
  return <Todos todos={data} />;
}
```
</Steps>

## ê¸°ë³¸ íŒŒì¼ êµ¬ì¡°

ì´ ê°€ì´ë“œëŠ” ë‹¤ìŒ íŒŒì¼ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:

```text
ğŸ“¦ <project root>
 â”œ ğŸ“‚ migrations
 â”‚  â”œ ğŸ“‚ meta
 â”‚  â”” ğŸ“œ 0000_heavy_doctor_doom.sql
 â”œ ğŸ“‚ public
 â”œ ğŸ“‚ src
 â”‚  â”œ ğŸ“‚ actions
 â”‚  â”‚  â”” ğŸ“œ todoActions.ts
 â”‚  â”œ ğŸ“‚ app
 â”‚  â”‚  â”œ ğŸ“œ favicon.ico
 â”‚  â”‚  â”œ ğŸ“œ globals.css
 â”‚  â”‚  â”œ ğŸ“œ layout.tsx
 â”‚  â”‚  â”” ğŸ“œ page.tsx
 â”‚  â”œ ğŸ“‚ components
 â”‚  â”‚  â”œ ğŸ“œ addTodo.tsx
 â”‚  â”‚  â”œ ğŸ“œ todo.tsx
 â”‚  â”‚  â”” ğŸ“œ todos.tsx
 â”‚  â”” ğŸ“‚ db
 â”‚  â”‚  â”œ ğŸ“œ drizzle.ts
 â”‚  â”‚  â”” ğŸ“œ schema.ts
 â”‚  â”” ğŸ“‚ types
 â”‚     â”” ğŸ“œ todoType.ts
 â”œ ğŸ“œ .env
 â”œ ğŸ“œ .eslintrc.json
 â”œ ğŸ“œ .gitignore
 â”œ ğŸ“œ drizzle.config.ts
 â”œ ğŸ“œ next-env.d.ts
 â”œ ğŸ“œ next.config.mjs
 â”œ ğŸ“œ package-lock.json
 â”œ ğŸ“œ package.json
 â”œ ğŸ“œ postcss.config.mjs
 â”œ ğŸ“œ README.md
 â”œ ğŸ“œ tailwind.config.ts
 â”” ğŸ“œ tsconfig.json
```
