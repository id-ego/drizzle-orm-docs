---
title: DrizzleORM v0.30.5 릴리스
pubDate: 2024-03-27
description: PostgreSQL, MySQL, SQLite를 위한 '$onUpdate' 기능이 추가되었으며 smallserial 데이터 타입 컬럼의 삽입 문제가 수정되었습니다.
---

## 새로운 기능

### PostgreSQL, MySQL, SQLite를 위한 `$onUpdate` 기능

컬럼에 동적 업데이트 값을 추가합니다.
이 함수는 행이 업데이트될 때 호출되며, 값이 제공되지 않은 경우 반환된 값이 컬럼 값으로 사용됩니다.
`default` (또는 `$defaultFn`) 값이 제공되지 않은 경우, 행이 삽입될 때도 함수가 호출되며 반환된 값이 컬럼 값으로 사용됩니다.

> 참고: 이 값은 `drizzle-kit` 동작에 영향을 주지 않으며, `drizzle-orm`에서 런타임에만 사용됩니다.

```ts copy {4,5,6}
const usersOnUpdate = pgTable('users_on_update', {
  id: serial('id').primaryKey(),
  name: text('name').notNull(),
  updateCounter: integer('update_counter').default(sql`1`).$onUpdateFn(() => sql`update_counter + 1`),
  updatedAt: timestamp('updated_at', { mode: 'date', precision: 3 }).$onUpdate(() => new Date()),
  alwaysNull: text('always_null').$type<string | null>().$onUpdate(() => null),
});
```

## 버그 수정

- smallserial 데이터 타입 컬럼의 삽입이 선택사항이 아니던 문제 수정 - [#1848](https://github.com/drizzle-team/drizzle-orm/issues/1848)
