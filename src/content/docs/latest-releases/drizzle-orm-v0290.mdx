---
title: DrizzleORM v0.29.0 ë¦´ë¦¬ìŠ¤
pubDate: 2023-11-09
description: MySQL bigintì˜ unsigned ì˜µì…˜, ê°œì„ ëœ ì¿¼ë¦¬ ë¹Œë” íƒ€ì…, ê¸°ë³¸ í‚¤ì™€ ì™¸ë˜ í‚¤ì˜ ì´ë¦„ ì§€ì • ê¸°ëŠ¥, ì½ê¸° ì „ìš© ë³µì œë³¸ ì§€ì›, ì§‘í•© ì—°ì‚°ì ì§€ì›, ìƒˆë¡œìš´ MySQL ë° PostgreSQL í”„ë¡ì‹œ ë“œë¼ì´ë²„, D1 Batch API ì§€ì› ë“±ì˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.
---
import Section from "@mdx/Section.astro";

> Drizzle ORM ë²„ì „ `0.29.0`ì€ ìµœì†Œ Drizzle Kit ë²„ì „ `0.20.0`ì´ í•„ìš”í•˜ë©°, ê·¸ ë°˜ëŒ€ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤. ë”°ë¼ì„œ Drizzle ORMì„ ìƒˆ ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•  ë•ŒëŠ” Drizzle Kitë„ í•¨ê»˜ ì—…ê·¸ë ˆì´ë“œí•´ì•¼ í•©ë‹ˆë‹¤. íŠ¹íˆ Drizzle Kitì„ ì—…ê·¸ë ˆì´ë“œí•´ì•¼ í•˜ëŠ”ë° Drizzle ORM ë²„ì „ì´ `<0.28.0`ë³´ë‹¤ ë‚®ì€ ê²½ìš°, ë²„ì „ ì „ë°˜ì— ê±¸ì³ ì¼ë¶€ í˜¸í™˜ì„± ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ìƒˆë¡œìš´ ê¸°ëŠ¥

### ğŸ‰ MySQL `unsigned` ì˜µì…˜ (bigint)

ì´ì œ `bigint unsigned` íƒ€ì…ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

```ts copy {2}
const table = mysqlTable('table', {
  id: bigint('id', { mode: 'number', unsigned: true }),
});
```

ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/column-types/mysql#bigint)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ğŸ‰ ê°œì„ ëœ ì¿¼ë¦¬ ë¹Œë” íƒ€ì…

`0.29.0`ë¶€í„° ê¸°ë³¸ì ìœ¼ë¡œ, Drizzleì˜ ëª¨ë“  ì¿¼ë¦¬ ë¹Œë”ëŠ” ê°€ëŠ¥í•œ í•œ SQL í‘œì¤€ì„ ë”°ë¥´ê¸° ìœ„í•´ ëŒ€ë¶€ë¶„ì˜ ë©”ì„œë“œë¥¼ í•œ ë²ˆë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, SELECT ë¬¸ì—ëŠ” WHERE ì ˆì´ í•˜ë‚˜ë§Œ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ .where()ëŠ” í•œ ë²ˆë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts copy {5}
const query = db
  .select()
  .from(users)
  .where(eq(users.id, 1))
  .where(eq(users.name, 'John')); // âŒ Type error - where() can only be invoked once
```

ì´ ë™ì‘ì€ ì „ì²´ ì¿¼ë¦¬ë¥¼ í•œ ë²ˆì— ì‘ì„±í•˜ëŠ” ê¸°ì¡´ì˜ ì¿¼ë¦¬ ë¹Œë”©ì—ëŠ” ìœ ìš©í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì¿¼ë¦¬ë¥¼ ë™ì ìœ¼ë¡œ ë¹Œë“œí•˜ë ¤ëŠ” ê²½ìš°, ì˜ˆë¥¼ ë“¤ì–´ ì¿¼ë¦¬ ë¹Œë”ë¥¼ ë°›ì•„ì„œ í™•ì¥í•˜ëŠ” ê³µìœ  í•¨ìˆ˜ê°€ ìˆëŠ” ê²½ìš°ì—ëŠ” ë¬¸ì œê°€ ë©ë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Drizzleì€ ì¿¼ë¦¬ ë¹Œë”ë¥¼ ìœ„í•œ íŠ¹ë³„í•œ 'dynamic' ëª¨ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ëª¨ë“œëŠ” ë©”ì„œë“œë¥¼ í•œ ë²ˆë§Œ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” ì œí•œì„ ì œê±°í•©ë‹ˆë‹¤. ì´ë¥¼ í™œì„±í™”í•˜ë ¤ë©´ ì¿¼ë¦¬ ë¹Œë”ì—ì„œ .$dynamic()ì„ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.

ì œê³µëœ í˜ì´ì§€ ë²ˆí˜¸ì™€ ì„ íƒì  í˜ì´ì§€ í¬ê¸°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¿¼ë¦¬ì— LIMIT ë° OFFSET ì ˆì„ ì¶”ê°€í•˜ëŠ” ê°„ë‹¨í•œ withPagination í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì—¬ ì‘ë™ ë°©ì‹ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤:

```ts copy {12,13}
function withPagination<T extends PgSelect>(
  qb: T,
  page: number,
  pageSize: number = 10,
) {
  return qb.limit(pageSize).offset(page * pageSize);
}

const query = db.select().from(users).where(eq(users.id, 1));
withPagination(query, 1); // âŒ Type error - the query builder is not in dynamic mode

const dynamicQuery = query.$dynamic();
withPagination(dynamicQuery, 1); // âœ… OK
```

withPagination í•¨ìˆ˜ëŠ” ì œë„¤ë¦­ì´ë¯€ë¡œ, ì˜ˆë¥¼ ë“¤ì–´ ì¡°ì¸ì„ ì¶”ê°€í•˜ëŠ” ë“± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì¿¼ë¦¬ ë¹Œë”ì˜ ê²°ê³¼ íƒ€ì…ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts copy {2}
function withFriends<T extends PgSelect>(qb: T) {
  return qb.leftJoin(friends, eq(friends.userId, users.id));
}

let query = db.select().from(users).where(eq(users.id, 1)).$dynamic();
query = withFriends(query);
```

ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/dynamic-query-building)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ğŸ‰ ê¸°ë³¸ í‚¤ ë° ì™¸ë˜ í‚¤ì˜ ì´ë¦„ ì§€ì • ê¸°ëŠ¥

ì œì•½ ì¡°ê±´ ì´ë¦„ì´ ë°ì´í„°ë² ì´ìŠ¤ì˜ 64ì ì œí•œì„ ì´ˆê³¼í•˜ëŠ” ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„ì´ ì´ë¦„ì„ ì˜ë¼ë‚´ì–´ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `0.29.0`ë¶€í„° `primaryKey()` ë° `foreignKey()` ëª¨ë‘ì— ëŒ€í•´ ì‚¬ìš©ì ì •ì˜ ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì´ì „ `primaryKey()` êµ¬ë¬¸ì€ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šì§€ë§Œ ì—¬ì „íˆ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° í–¥í›„ ë¦´ë¦¬ìŠ¤ì—ì„œ ì œê±°ë  ì˜ˆì •ì…ë‹ˆë‹¤.

```ts copy {5,7}
const table = pgTable('table', {
  id: integer('id'),
  name: text('name'),
}, (table) => ({
  cpk: primaryKey({ name: 'composite_key', columns: [table.id, table.name] }),
  cfk: foreignKey({
    name: 'fkName',
    columns: [table.id],
    foreignColumns: [table.name],
  }),
}));
```

ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/indexes-constraints#composite-primary-key)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ğŸ‰ ì½ê¸° ì „ìš© ë³µì œë³¸ ì§€ì›

ì´ì œ Drizzle `withReplica` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½ê¸° ì „ìš© ë³µì œë³¸ê³¼ ì“°ê¸° ì‘ì—…ì„ ìœ„í•œ ë©”ì¸ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•´ ì„œë¡œ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ `withReplicas`ëŠ” ì½ê¸° ì‘ì—…ì— ì„ì˜ì˜ ì½ê¸° ì „ìš© ë³µì œë³¸ì„ ì‚¬ìš©í•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  ë°ì´í„° ìˆ˜ì • ì‘ì—…ì—ëŠ” ë©”ì¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë˜í•œ ì‚¬ìš©í•  ì½ê¸° ì „ìš© ë³µì œë³¸ ì—°ê²°ì„ ì„ íƒí•˜ëŠ” ì‚¬ìš©ì ì •ì˜ ë¡œì§ì„ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê°€ì¤‘ì¹˜ë¥¼ ì ìš©í•˜ê±°ë‚˜ ì‚¬ìš©ì ì •ì˜ ê²°ì •ì„ ë‚´ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ì‚¬ìš© ì˜ˆì œì…ë‹ˆë‹¤:

```ts copy {5}
const primaryDb = drizzle({ client });
const read1 = drizzle({ client });
const read2 = drizzle({ client });

const db = withReplicas(primaryDb, [read1, read2]);

// read from primary
db.$primary.select().from(usersTable);

// read from either read1 connection or read2 connection
db.select().from(usersTable)

// use primary database for delete operation
db.delete(usersTable).where(eq(usersTable.id, 1))
```

ì²« ë²ˆì§¸ ë³µì œë³¸ì´ 70% í™•ë¥ ë¡œ ì„ íƒë˜ê³  ë‘ ë²ˆì§¸ ë³µì œë³¸ì´ 30% í™•ë¥ ë¡œ ì„ íƒë˜ëŠ” ì½ê¸° ì „ìš© ë³µì œë³¸ ì„ íƒì„ ìœ„í•œ ì‚¬ìš©ì ì •ì˜ ë¡œì§ êµ¬í˜„ ì˜ˆì œì…ë‹ˆë‹¤. ì½ê¸° ì „ìš© ë³µì œë³¸ì— ëŒ€í•´ ì–´ë–¤ ìœ í˜•ì˜ ëœë¤ ì„ íƒì´ë“  êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts copy
const db = withReplicas(primaryDb, [read1, read2], (replicas) => {
    const weight = [0.7, 0.3];
    let cumulativeProbability = 0;
    const rand = Math.random();

    for (const [i, replica] of replicas.entries()) {
      cumulativeProbability += weight[i]!;
      if (rand < cumulativeProbability) return replica;
    }
    return replicas[0]!
});
```

`withReplicas` í•¨ìˆ˜ëŠ” Drizzle ORMì˜ ëª¨ë“  dialectì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/read-replicas)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ğŸ‰ ì§‘í•© ì—°ì‚°ì ì§€ì› (UNION, UNION ALL, INTERSECT, INTERSECT ALL, EXCEPT, EXCEPT ALL)

API ë…¼ì˜ë¶€í„° ì ì ˆí•œ íƒ€ì… ì²´í¬ ë° ëŸ°íƒ€ì„ ë¡œì§, ê´‘ë²”ìœ„í•œ í…ŒìŠ¤íŠ¸ ì„¸íŠ¸ì— ì´ë¥´ê¸°ê¹Œì§€ ì¤‘ìš”í•œ ê¸°ì—¬ë¥¼ í•´ì£¼ì‹  @Angelelzì—ê²Œ í° ê°ì‚¬ë¥¼ ë“œë¦½ë‹ˆë‹¤. ì´ëŠ” ì´ë²ˆ ë¦´ë¦¬ìŠ¤ì—ì„œ ì´ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë° í° ë„ì›€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì‚¬ìš© ì˜ˆì œ:
ëª¨ë“  ì§‘í•© ì—°ì‚°ìëŠ” ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: `import ë°©ì‹` ë˜ëŠ” `ë¹Œë” ë°©ì‹`

<Section>
```ts copy {2,7}
// Import approach
import { union } from 'drizzle-orm/pg-core'

const allUsersQuery = db.select().from(users);
const allCustomersQuery = db.select().from(customers);

const result = await union(allUsersQuery, allCustomersQuery)
```

```ts copy {2}
// Builder approach
const result = await db.select().from(users).union(db.select().from(customers));
```
</Section>

ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/set-operations)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ğŸ‰ ìƒˆë¡œìš´ MySQL í”„ë¡ì‹œ ë“œë¼ì´ë²„

MySQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” HTTP ë“œë¼ì´ë²„ì— ëŒ€í•œ ìì²´ êµ¬í˜„ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ë“œë¼ì´ë²„ê°€ ë¦´ë¦¬ìŠ¤ë˜ì—ˆìŠµë‹ˆë‹¤. `./examples/mysql-proxy` í´ë”ì—ì„œ ì‚¬ìš© ì˜ˆì œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¿¼ë¦¬ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ì— ì‚¬ìš©ë  ë‘ ê°œì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„œë²„ì— êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤(ë§ˆì´ê·¸ë ˆì´ì…˜ ì—”ë“œí¬ì¸íŠ¸ëŠ” ì„ íƒ ì‚¬í•­ì´ë©° drizzle ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš°ì—ë§Œ í•„ìš”í•©ë‹ˆë‹¤). ì„œë²„ ë° ë“œë¼ì´ë²„ êµ¬í˜„ì€ ëª¨ë‘ ì‚¬ìš©ìì—ê²Œ ë‹¬ë ¤ ìˆìœ¼ë¯€ë¡œ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œë“  ì œí•œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì •ì˜ ë§¤í•‘, ë¡œê¹… ë“±ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì„œë²„ ë° ë“œë¼ì´ë²„ êµ¬í˜„ ì˜ˆì œëŠ” ëª¨ë‘ `./examples/mysql-proxy` í´ë”ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts copy {4,9}
// Driver
import axios from 'axios';
import { eq } from 'drizzle-orm/expressions';
import { drizzle } from 'drizzle-orm/mysql-proxy';
import { migrate } from 'drizzle-orm/mysql-proxy/migrator';
import { cities, users } from './schema';

async function main() {
  const db = drizzle(async (sql, params, method) => {
    try {
      const rows = await axios.post(`${process.env.REMOTE_DRIVER}/query`, {
        sql,
        params,
        method,
      });

      return { rows: rows.data };
    } catch (e: any) {
      console.error('Error from pg proxy server:', e.response.data);
      return { rows: [] };
    }
  });

  await migrate(db, async (queries) => {
    try {
      await axios.post(`${process.env.REMOTE_DRIVER}/migrate`, { queries });
    } catch (e) {
      console.log(e);
      throw new Error('Proxy server cannot run migrations');
    }
  }, { migrationsFolder: 'drizzle' });

  await db.insert(cities).values({ id: 1, name: 'name' });

  await db.insert(users).values({
    id: 1,
    name: 'name',
    email: 'email',
    cityId: 1,
  });

  const usersToCityResponse = await db.select().from(users).leftJoin(
    cities,
    eq(users.cityId, cities.id),
  );
}
```

ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/get-started-mysql#http-proxy)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ğŸ‰ ìƒˆë¡œìš´ PostgreSQL í”„ë¡ì‹œ ë“œë¼ì´ë²„

MySQLê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì´ì œ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ìš© ìì²´ HTTP ë“œë¼ì´ë²„ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `./examples/pg-proxy` í´ë”ì—ì„œ ì‚¬ìš© ì˜ˆì œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¿¼ë¦¬ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ì— ì‚¬ìš©ë  ë‘ ê°œì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„œë²„ì— êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤(ë§ˆì´ê·¸ë ˆì´ì…˜ ì—”ë“œí¬ì¸íŠ¸ëŠ” ì„ íƒ ì‚¬í•­ì´ë©° drizzle ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš°ì—ë§Œ í•„ìš”í•©ë‹ˆë‹¤). ì„œë²„ ë° ë“œë¼ì´ë²„ êµ¬í˜„ì€ ëª¨ë‘ ì‚¬ìš©ìì—ê²Œ ë‹¬ë ¤ ìˆìœ¼ë¯€ë¡œ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œë“  ì œí•œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì •ì˜ ë§¤í•‘, ë¡œê¹… ë“±ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì„œë²„ ë° ë“œë¼ì´ë²„ êµ¬í˜„ ì˜ˆì œëŠ” ëª¨ë‘ `./examples/pg-proxy` í´ë”ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts copy {3,8}
import axios from 'axios';
import { eq } from 'drizzle-orm/expressions';
import { drizzle } from 'drizzle-orm/pg-proxy';
import { migrate } from 'drizzle-orm/pg-proxy/migrator';
import { cities, users } from './schema';

async function main() {
  const db = drizzle(async (sql, params, method) => {
    try {
      const rows = await axios.post(`${process.env.REMOTE_DRIVER}/query`, { sql, params, method });

      return { rows: rows.data };
    } catch (e: any) {
      console.error('Error from pg proxy server:', e.response.data);
      return { rows: [] };
    }
  });

  await migrate(db, async (queries) => {
    try {
      await axios.post(`${process.env.REMOTE_DRIVER}/query`, { queries });
    } catch (e) {
      console.log(e);
      throw new Error('Proxy server cannot run migrations');
    }
  }, { migrationsFolder: 'drizzle' });

  const insertedCity = await db.insert(cities).values({ id: 1, name: 'name' }).returning();
  const insertedUser = await db.insert(users).values({ id: 1, name: 'name', email: 'email', cityId: 1 });
  const usersToCityResponse = await db.select().from(users).leftJoin(cities, eq(users.cityId, cities.id));
}
```

ìì„¸í•œ ë‚´ìš©ì€ [ë¬¸ì„œ](/docs/get-started-postgresql#http-proxy)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ğŸ‰ `D1` Batch API ì§€ì›

ì°¸ì¡°: https://developers.cloudflare.com/d1/platform/client-api/#dbbatch

Batch API ì‚¬ìš© ì˜ˆì œ:

<Section>
```ts copy {1}
const batchResponse = await db.batch([
  db.insert(usersTable).values({ id: 1, name: 'John' }).returning({
    id: usersTable.id,
  }),
  db.update(usersTable).set({ name: 'Dan' }).where(eq(usersTable.id, 1)),
  db.query.usersTable.findMany({}),
  db.select().from(usersTable).where(eq(usersTable.id, 1)),
  db.select({ id: usersTable.id, invitedBy: usersTable.invitedBy }).from(
    usersTable,
  ),
]);
```

```ts
type BatchResponse = [
  {
    id: number;
  }[],
  D1Result,
  {
    id: number;
    name: string;
    verified: number;
    invitedBy: number | null;
  }[],
  {
    id: number;
    name: string;
    verified: number;
    invitedBy: number | null;
  }[],
  {
    id: number;
    invitedBy: number | null;
  }[],
];
```
</Section>

`db.batch` ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ë¹Œë”:

```ts
`db.all()`,
`db.get()`,
`db.values()`,
`db.run()`,
`db.query.<table>.findMany()`,
`db.query.<table>.findFirst()`,
`db.select()...`,
`db.update()...`,
`db.delete()...`,
`db.insert()...`,
```

ë” ë§ì€ ì‚¬ìš© ì˜ˆì œëŠ” [integration-tests/tests/d1-batch.test.ts](https://github.com/drizzle-team/drizzle-orm/blob/beta/integration-tests/tests/d1-batch.test.ts) ë° [ë¬¸ì„œ](/docs/batch-api)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---
## Drizzle Kit 0.20.0

1. `defineConfig` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ ìƒˆë¡œìš´ drizzle.config ì •ì˜ ë°©ë²•
2. wrangler.toml íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ Drizzle Studioë¡œ Cloudflare D1ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ê¸°ëŠ¥
3. Drizzle Studioê°€ https://local.drizzle.studio/ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
4. `bigint unsigned` ì§€ì›
5. `primaryKeys` ë° `foreignKeys`ì— ì‚¬ìš©ì ì •ì˜ ì´ë¦„ ì§€ì • ê°€ëŠ¥
6. í™˜ê²½ ë³€ìˆ˜ê°€ ì´ì œ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜´
7. ì¼ë¶€ ë²„ê·¸ ìˆ˜ì • ë° ê°œì„  ì‚¬í•­

drizzle-kit ì—…ë°ì´íŠ¸ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [ì—¬ê¸°](https://github.com/drizzle-team/drizzle-kit-mirror/releases/tag/v0.20.0)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
