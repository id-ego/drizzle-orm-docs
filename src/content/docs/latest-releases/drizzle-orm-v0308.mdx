---
title: DrizzleORM v0.30.8 릴리스
pubDate: 2024-04-11
description: Postgres enum에 커스텀 스키마 지원 추가, D1 'migrate()' 함수가 배치 API 사용하도록 변경, '.onConflictDoUpdate' 메서드 업데이트, Postgres '.onConflictDoNothing' 메서드의 'where' 절 쿼리 생성 수정 및 AWS Data API 관련 다양한 버그 수정.
---

## 새로운 기능

- Postgres enum에 커스텀 스키마 지원 추가 (fixes [#669](https://github.com/drizzle-team/drizzle-orm/issues/669) via [#2048](https://github.com/drizzle-team/drizzle-orm/pull/2048)):

```ts copy {3,4}
import { pgSchema } from 'drizzle-orm/pg-core';

const mySchema = pgSchema('mySchema');
const colors = mySchema.enum('colors', ['red', 'green', 'blue']);
```

Postgres [스키마](/docs/schemas) 및 [enum](/docs/column-types/pg#enum)에 대해 자세히 알아보세요.

## 수정 사항

- D1 `migrate()` 함수가 배치 API를 사용하도록 변경 ([#2137](https://github.com/drizzle-team/drizzle-orm/pull/2137))

Drizzle 및 D1 시작하기는 [문서](/docs/get-started-sqlite#cloudflare-d1)를 참고하세요.

- Postgres `.onConflictDoUpdate` 메서드의 `where` 절을 `setWhere`와 `targetWhere` 절로 분리하여 `on conflict ...` 절의 두 가지 `where` 케이스를 모두 지원 (fixes [#1628](https://github.com/drizzle-team/drizzle-orm/issues/1628), [#1302](https://github.com/drizzle-team/drizzle-orm/issues/1302) via [#2056](https://github.com/drizzle-team/drizzle-orm/pull/2056)).

```ts copy
await db.insert(employees)
  .values({ employeeId: 123, name: 'John Doe' })
  .onConflictDoUpdate({
    target: employees.employeeId,
    targetWhere: sql`name <> 'John Doe'`,
    set: { name: sql`excluded.name` }
  });

await db.insert(employees)
  .values({ employeeId: 123, name: 'John Doe' })
  .onConflictDoUpdate({
    target: employees.employeeId,
    set: { name: 'John Doe' },
    setWhere: sql`name <> 'John Doe'`
  });
```

`.onConflictDoUpdate` 메서드에 대한 자세한 내용은 [여기](/docs/insert#on-conflict-do-update)를 참고하세요.
- Postgres `.onConflictDoNothing` 메서드의 `where` 절이 잘못된 위치에 배치되었던 쿼리 생성 문제 수정 (fixes [#1628](https://github.com/drizzle-team/drizzle-orm/issues/1628) via [#2056](https://github.com/drizzle-team/drizzle-orm/pull/2056)).

`.onConflictDoNothing` 메서드에 대한 자세한 내용은 [여기](/docs/insert#on-conflict-do-nothing)를 참고하세요.

- AWS Data API 드라이버 관련 여러 문제 수정 (fixes [#1931](https://github.com/drizzle-team/drizzle-orm/pull/1931), [#1932](https://github.com/drizzle-team/drizzle-orm/issues/1932), [#1934](https://github.com/drizzle-team/drizzle-orm/issues/1934), [#1936](https://github.com/drizzle-team/drizzle-orm/issues/1936) via [#2119](https://github.com/drizzle-team/drizzle-orm/pull/2119))
- AWS Data API에서 배열 값 삽입 및 업데이트 문제 수정 (fixes [#1912](https://github.com/drizzle-team/drizzle-orm/issues/1912) via [#1911](https://github.com/drizzle-team/drizzle-orm/pull/1911))

Drizzle 및 AWS Data API 시작하기는 [문서](/docs/get-started-postgresql#aws-data-api)를 참고하세요.
