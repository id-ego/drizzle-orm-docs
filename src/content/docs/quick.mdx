import Npm from "@mdx/Npm.astro";

# ë¹ ë¥¸ ì‹œì‘
`PostgreSQL` + `postgresjs`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ ë¥¸ ì‹œì‘ ì•±ì„ ë§Œë“¤ê³  ì²« ë²ˆì§¸ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•´ë´…ì‹œë‹¤.

ê°€ì¥ ë¨¼ì € í•´ì•¼ í•  ì¼ì€ `drizzle-orm`ê³¼ `drizzle-kit`ì„ ì„¤ì¹˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:

<Npm>
drizzle-orm postgres
-D drizzle-kit
</Npm>

ì´ì œ `schema.ts`ë¥¼ ì„ ì–¸í•´ë´…ì‹œë‹¤:

```plaintext {4}
ğŸ“¦ <project root>
 â”œ ...
 â”œ ğŸ“‚ src
 â”‚ â”” ğŸ“œ schema.ts
 â”” ğŸ“œ package.json
```
```ts copy filename="schema.ts"
import { serial, text, timestamp, pgTable } from "drizzle-orm/pg-core";

export const user = pgTable("user", {
  id: serial("id"),
  name: text("name"),
  email: text("email"),
  password: text("password"),
  role: text("role").$type<"admin" | "customer">(),
  createdAt: timestamp("created_at"),
  updatedAt: timestamp("updated_at"),
});
```

ì´ì œ Drizzle ì„¤ì • íŒŒì¼ì„ ì¶”ê°€í•´ë´…ì‹œë‹¤:
```plaintext {4}
ğŸ“¦ <project root>
 â”œ ...
 â”œ ğŸ“‚ src
 â”œ ğŸ“œ drizzle.config.ts
 â”” ğŸ“œ package.json
```
```ts
import { defineConfig } from "drizzle-kit";

export default defineConfig({
  dialect: "postgresql",
  schema: "./src/schema.ts",
  out: "./drizzle",
});
```

`package.json`ì— `generate`ì™€ `migrate` ëª…ë ¹ì„ ì¶”ê°€í•˜ê³  ì²« ë²ˆì§¸ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•´ë´…ì‹œë‹¤:

```json filename="package.json" {5,6}
{
  "name": "first time?",
  "version": "0.0.1",
  "scripts": {
    "generate": "drizzle-kit generate",
    "migrate": "drizzle-kit migrate"
  }, 
}
```
```shell filename="terminal"
$ npm run generate
...

[âœ“] Your SQL migration file âœ drizzle/20242409125510_pale_mister_fear/migration.sql ğŸš€
```

ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ì´ì œ ì²« ë²ˆì§¸ SQL ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ¥³
```plaintext {4}
ğŸ“¦ <project root>
 â”œ ğŸ“‚ drizzle
 â”‚ â”œ ğŸ“‚ 20242409125510_pale_mister_fear
 â”œ ğŸ“‚ src
 â”œ ğŸ“œ drizzle.config.ts
 â”” ğŸ“œ package.json
```
ì´ì œ ë°ì´í„°ë² ì´ìŠ¤ì— ì²« ë²ˆì§¸ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•´ë´…ì‹œë‹¤:

```shell filename="terminal"
$ npm run migrate
```

ëì…ë‹ˆë‹¤!

**ì¶•í•˜í•©ë‹ˆë‹¤ ğŸ‰**